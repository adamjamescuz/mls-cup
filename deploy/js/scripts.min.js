function hasWebGL(){try{var a=document.createElement("canvas");return!!window.WebGLRenderingContext&&(a.getContext("webgl")||a.getContext("experimental-webgl"))}catch(b){return!1}}function isIE(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("msie")?parseInt(a.split("msie")[1]):!1}function getBrowserWidth(){return window.top.innerWidth||window.top.document.documentElement.clientWidth}function getBrowserHeight(){return window.top.innerHeight||window.top.document.documentElement.clientHeight}function getOrientation(){var a=getBrowserWidth()>getBrowserHeight()?"landscape":"portrait";return a}function getUrlVars(){for(var a,b=[],c=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),d=0;d<c.length;d++)a=c[d].split("="),b.push(a[0]),b[a[0]]=a[1];return b}function ImageParticle(a,b,c,d){this.loader=a,this.container=b,this.posX=0,this.posY=0,this.velX=0,this.velY=0,this.depth=1,this.shrink=1,this.shrinkX=1,this.shrinkY=1,this.size=1,this.scaleX=1,this.scaleY=1,this.maxSize=-1,this.shimmer=!0,this.drag=1,this.gravity=0,this.alpha=0,this.fade=0,this.spin=0,this.rotation=0,this.theta=0,this.thetaDelta=.1,this.lateralX=5,this.blendMode=d,this.img=new createjs.Bitmap(this.loader.getResult(c)),this.img.regX=.5*this.img.image.width,this.img.regY=.5*this.img.image.height,this.container.addChild(this.img),this.img.alpha=this.alpha,this.img.compositeOperation=this.blendMode,this.img.cache(0,0,this.img.image.width,this.img.image.height),this.update=function(){this.velX*=this.drag,this.velY*=this.drag,this.velY+=this.gravity,this.posX+=this.velX,this.posY+=this.velY,this.size*=this.shrink,this.scaleX*=this.shrinkX,this.scaleY*=this.shrinkY,this.maxSize>0&&this.size>this.maxSize&&(this.size=this.maxSize),this.alpha-=this.fade,this.alpha<0&&(this.alpha=0),this.alpha>1&&(this.alpha=1),this.posX+=Math.sin(this.theta)*this.lateralX,this.theta+=this.thetaDelta,this.theta>359&&(this.theta=0),this.rotation+=this.spin},this.render=function(){if(0!=this.alpha){this.img.x=this.posX,this.img.y=this.posY;var a=this.shimmer?this.size*Math.random():this.size;this.img.scaleX=a*this.scaleX,this.img.scaleY=a*this.scaleY,this.img.rotation=this.rotation,this.img.alpha=this.alpha}}}var app;$(document).ready(function(){var a={properties:{width:2e3,height:1050,fps:60},views:[{id:0,name:"intro",elem:"#intro-view",layerOrder:1,assets:[{src:"assets/images/confetti/confetti-particle-0.png",id:"confetti-0"},{src:"assets/images/confetti/confetti-particle-1.png",id:"confetti-1"},{src:"assets/images/confetti/confetti-particle-2.png",id:"confetti-2"},{src:"assets/images/confetti/confetti-particle-3.png",id:"confetti-3"},{src:"assets/images/confetti/confetti-particle-4.png",id:"confetti-4"},{src:"assets/images/confetti/confetti-particle-5.png",id:"confetti-5"},{src:"assets/images/intro/cup.png",id:"cup"}]},{id:1,name:"team-vs-team",elem:"#team-vs-team-view",layerOrder:2,nav:!1,assets:[{src:"assets/images/team-vs-team/dallas-wedge.png",id:"dallas-wedge"},{src:"assets/images/team-vs-team/portland-wedge.png",id:"portland-wedge"}]},{id:2,name:"final-frame",elem:"#final-frame-view",layerOrder:0,nav:!1,assets:[]}],viewsRequiredToRun:["intro","team-vs-team","final-frame"],startPage:"intro",loader:"#loader"};app=new ApplicationController(a),app.init()}),function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}a.prototype=window.Event.prototype,window.CustomEvent=a}();var inheritsFrom=function(a,b){a.prototype=Object.create(b.prototype)};window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();var ConfettiController=function(a,b,c,d,e,f,g){this.loader=a,this.bitmapID=b,this.screenWidth=c,this.screenHeight=d,this.container=new createjs.Container,e?(this.container.x=e.x,this.container.y=e.y):(this.container.x=.5*this.screenWidth,this.container.y=.5*this.screenHeight),this.blendMode="source-over",this.alpha=g?g:.42,this.particles=[],this.maxParticles=f};$.extend(ConfettiController.prototype,{initParticles:function(){var a=this;this.makeParticles(this.maxParticles),createjs.Ticker.addEventListener("tick",function(){a.update()})},makeParticles:function(a){for(var b=0;a>b;b++){var c=Math.floor(this.randomRange(0,5)),d=new ImageParticle(this.loader,this.container,this.bitmapID+c.toString(),this.blendMode);this.particles.push(d),this.initParticle(d,b,!1)}},initParticle:function(a,b,c){var d=this.randomRange(.1,1);c===!0?a.posY=-a.img.image.width:a.posY=this.randomRange(0,-this.screenHeight),a.posX=this.randomRange(0,this.screenWidth),a.depth=d,a.velX=.4*d,a.velY=0,a.lateralX=this.randomRange(-10*d,10*d),a.thetaDelta=this.randomRange(d*-.05,.05*d),a.scaleX=d,a.scaleY=d,a.alpha=d*this.alpha,a.gravity=.1*d,a.drag=.98,a.fade=0,a.spin=this.randomRange(-1*d,d),a.shrinkX=this.randomRange(1,1),a.shimmer=!1,a.compositeOperation=this.blendMode,b%2===0&&(a.scaleX*=-1)},stop:function(){createjs.Ticker.reset()},update:function(){for(var a=0;a<this.particles.length;a++){var b=this.particles[a];b.update(),b.render(),b.posX>this.screenWidth+.5*b.img.image.width&&this.initParticle(b,a,!0),b.posY>this.screenHeight+.5*b.img.image.height&&this.initParticle(b,a,!0)}},randomRange:function(a,b){return Math.random()*(b-a)+a}});var Loader=function(a){this.elem=$(a)};$.extend(Loader.prototype,{init:function(){this.hide()},show:function(){this.elem.css("display","block"),TweenMax.to(this.elem[0],.1,{opacity:1,ease:Power2.easeOut,onComplete:function(){}})},hide:function(){var a=this;TweenMax.to(this.elem[0],.2,{opacity:0,ease:Power2.easeOut,onComplete:function(){a.elem.css("display","none")}})}});var VideoController=function(a,b){this.elem=$(a),this.videoID=b,this.video,this.playButton,this.pauseButton,this.close,this.playingState};VideoController.States={PAUSED:0,PLAYING:1},$.extend(VideoController.prototype,{init:function(){var a=this;this.video=this.elem.find(this.videoID).get(0),this.video.onended=function(){a.handleVideoEnd()},this.playButton=this.elem.find("#play-btn"),this.pauseButton=this.elem.find("#pause-btn"),this.close=this.elem.find("#close-btn"),this.playButton.bind("pointerdown",function(){a.handlePlayPauseClicked()}),this.pauseButton.bind("pointerdown",function(){a.handlePlayPauseClicked()}),this.close.bind("pointerdown",function(){a.handleCloseClicked()}),this.pause()},handleCloseClicked:function(){this.pause(),this.hide();var a=new CustomEvent("Close",{detail:{}});this.elem[0].dispatchEvent(a)},handleVideoEnd:function(){console.log("video ended"),this.pause(),this.video.currentTime=0},handlePlayPauseClicked:function(a){switch(this.state){case VideoController.States.PAUSED:this.play();break;case VideoController.States.PLAYING:this.pause()}},play:function(){this.state=VideoController.States.PLAYING,this.video.play(),this.playButton.css("display","none"),this.pauseButton.css("display","block")},pause:function(){this.state=VideoController.States.PAUSED,this.video.pause(),this.playButton.css("display","block"),this.pauseButton.css("display","none")},show:function(a){this.elem.css("display","block"),TweenMax.to(this.elem[0],.4,{opacity:1,ease:Back.easeOut,onComplete:function(){}})},hide:function(a){var b=this;TweenMax.to(this.elem[0],.4,{opacity:0,ease:Power2.easeOut,onComplete:function(){b.elem.css("display","none")}})},destroy:function(){}});var ViewControllerBase=function(a){this.config=a,this.elem=$(a.elem),this.elem.css("z-index",this.config.layerOrder),this.loader={},this.callbacks=[],this.transitionOutCallbacks=[],this.listenerRefs={},this.isReady=!1};$.extend(ViewControllerBase.prototype,{init:function(){this.isReady?this.transitionIn():this.setup()},setup:function(){console.log(this.config.name+" : setup");var a=this;this.config.assets.length>0?(this.loader=new createjs.LoadQueue(!0),this.listenerRefs.loader=this.loader.addEventListener("complete",function(){a.handleLoadComplete()}),this.loader.loadManifest(this.config.assets)):this.handleLoadComplete()},handleLoadComplete:function(){this.dispatchIsReady()},show:function(){this.elem.css("display","block"),this.elem.css("pointer-events","auto")},hide:function(){this.elem.css("display","none"),this.elem.css("pointer-events","none")},navigateTo:function(a,b){var c=new CustomEvent("NavigateTo",{detail:{page:a}});this.elem[0].dispatchEvent(c)},showOtherView:function(a){var b=new CustomEvent("ShowOtherView",{detail:{page:a}});this.elem[0].dispatchEvent(b)},transitionOut:function(){console.log(this.config.name+" : transition out"),this.dispatchTransitionOutComplete()},destroy:function(){console.log(this.config.name+" : destroy"),this.hide()},dispatchTransitionOutComplete:function(){var a=new CustomEvent("TransitionOutComplete",{detail:{config:this.config}});this.elem[0].dispatchEvent(a)},transitionIn:function(){console.log(this.config.name+" : transition in"),this.show(),this.dispatchTransitionIn()},dispatchTransitionIn:function(){var a=new CustomEvent("TransitionIn",{detail:{config:this.config}});this.elem[0].dispatchEvent(a)},dispatchIsReady:function(){console.log("dispatch is ready"),this.isReady=!0;var a=new CustomEvent("Ready",{detail:{config:this.config}});this.elem[0].dispatchEvent(a)}});var ApplicationController=function(a){this.siteModel=a,this.activeViewController=null,this.previousViewController=null,this.views={},this.viewsReadyToRun=[],this.loader={},this.nextViewAfterTranstion};$.extend(ApplicationController.prototype,{init:function(){this.loader=new Loader("#loader-container"),this.loader.init(),this.showLoader();var a=this;_.forEach(this.siteModel.views,function(b){var c={};switch(b.name){case"intro":c=new IntroViewController(b);break;case"team-vs-team":c=new TeamVsTeamView(b);break;case"final-frame":c=new FinalFrameView(b);break;default:console.error("unknown view in config")}a.views[b.name]=c,c.elem[0].addEventListener("TransitionOutComplete",function(b){a.handleTransitionOut(b.detail.config)},!1),c.elem[0].addEventListener("TransitionIn",function(b){a.handleTransitionIn()},!1),c.elem[0].addEventListener("NavigateTo",function(b){a.handleNavigateTo(b.detail.page)},!1),c.elem[0].addEventListener("ShowOtherView",function(b){a.handleShowOtherView(b.detail.page)},!1),c.elem[0].addEventListener("Ready",function(b){a.handlePageIsReady(b.detail.config)},!1)},this),this.siteModel.viewsRequiredToRun.length>0?_.forEach(this.siteModel.viewsRequiredToRun,function(a){this.views[a].setup()},this):this.start()},showLoader:function(){this.loader.show()},hideLoader:function(){this.loader.hide()},handlePageIsReady:function(a){if(console.log("ApplicationController: pageReady"),_.contains(this.siteModel.viewsRequiredToRun,a.name)){this.viewsReadyToRun.push(a.name);var b=_(this.siteModel.viewsRequiredToRun).difference(this.viewsReadyToRun);0===b.length&&(this.hideLoader(),this.start())}else this.hideLoader(),this.activeViewController.transitionIn()},handleShowOtherView:function(a){var b=this.views[a];b.show()},handleNavigateTo:function(a){this.navigateTo(a)},handleTransitionIn:function(){console.log("ApplicationController: handle transition in"),null!==this.previousViewController&&(this.previousViewController.destroy(),this.previousViewController=null),this.hideLoader()},handleTransitionOut:function(){console.log("ApplicationController: handle transition out"),this.previousViewController=this.activeViewController,this.activeViewController=null,this.initView(this.nextViewAfterTranstion)},start:function(){console.log("ApplicationController: start");this.navigateTo(this.siteModel.startPage)},navigateTo:function(a){console.log("ApplicationController: navigate to: "+a),null===this.activeViewController?this.initView(a):(this.nextViewAfterTranstion=a,this.activeViewController.transitionOut())},initView:function(a){console.log("ApplicationController: init view with name: "+a),this.activeViewController=this.views[a],this.activeViewController.init()},hideAllViews:function(){$(".view").css("display","none"),$(".view").css("pointer-events","none")}});var FinalFrameView=function(a){ViewControllerBase.call(this,a),this.inTimeline={},this.videoController={},this.fader=this.elem.find(".fader"),this.infoScaler=this.elem.find(".info-scaler"),this.hotspotWrapper=this.elem.find(".hotspot-wrapper"),this.mlsCup=this.elem.find("#mls-cup"),this.hand=this.elem.find(".hand"),this.videoContainer=this.elem.find(".video-container"),this.hotspotButton=this.elem.find("#hotspot-button")};inheritsFrom(FinalFrameView,ViewControllerBase),$.extend(FinalFrameView.prototype,{handleLoadComplete:function(){console.log("FinalFrameView handleLoadComplete");var a=this;this.inTimeline=new TimelineMax({delay:1}),this.videoController=new VideoController(this.videoContainer,"#tv-spot"),this.videoController.elem[0].addEventListener("Close",function(b){a.handleVideoClosed(b.detail)},!1),this.videoController.init(),$(window).bind("resize",function(b){a.handleResize(b)}),this.handleResize(null),this.hotspotButton.bind("pointerdown",function(){a.handleVideoHotspotClicked()}),this.dispatchIsReady()},transitionIn:function(){console.log("FinalFrameView transition in");this.show(),this.dispatchTransitionIn(),this.inTimeline.from(this.hand,.6,{opacity:0,x:75,y:75,ease:Power2.easeOut}),this.inTimeline.set(this.hand,{opacity:0,x:75,y:75},"+=0.5"),this.inTimeline.to(this.hand,.6,{opacity:1,x:0,y:0,ease:Power2.easeOut}),this.inTimeline.set(this.hand,{opacity:0,x:75,y:75},"+=0.5"),this.inTimeline.to(this.hand,.6,{opacity:1,x:0,y:0,ease:Power2.easeOut}),this.inTimeline.set(this.hand,{opacity:0,x:75,y:75},"+=0.5"),this.inTimeline.to(this.hand,.6,{opacity:1,x:0,y:0,ease:Power2.easeOut})},handleVideoHotspotClicked:function(){TweenMax.to(this.fader,.8,{opacity:.8,ease:Quad.easeOut}),this.videoController.show()},handleVideoClosed:function(){TweenMax.to(this.fader,.4,{opacity:0,ease:Quad.easeOut})},handleResize:function(a){var b=getBrowserHeight(),c=b/app.siteModel.properties.height,d=getBrowserWidth(),e=d/app.siteModel.properties.width,f=Math.min(Math.min(c,e),1);this.mlsCup.css("transform","scale("+f+")"),this.infoScaler.css("transform","scale("+f+")"),this.hotspotWrapper.css("transform","scale("+f+")"),this.videoContainer.css("transform","scale("+f+")")}});var IntroViewController=function(a){ViewControllerBase.call(this,a),this.stage,this.confettiController={},this.timeline={},this.scaler=this.elem.find(".scaler"),this.cup=this.elem.find(".cup"),this.confettiParticles=600};inheritsFrom(IntroViewController,ViewControllerBase),$.extend(IntroViewController.prototype,{handleLoadComplete:function(){console.log("intro view: load complete");var a=this;this.stage=new createjs.Stage($("#canvas")[0]),this.stage.update(),this.stage.enableMouseOver(),createjs.Ticker.setFPS(app.siteModel.properties.fps),createjs.Ticker.addEventListener("tick",this.stage),createjs.Touch.enable(this.stage),this.timeline=new TimelineMax({onComplete:function(){}}),this.confettiController=new ConfettiController(this.loader,"confetti-",app.siteModel.properties.width,app.siteModel.properties.height,{x:0,y:0},this.confettiParticles,1),this.stage.addChild(this.confettiController.container),$(window).bind("resize",function(b){a.handleResize(b)}),this.handleResize(null),this.dispatchIsReady()},transitionIn:function(){console.log("Intro view: transitionIn");var a=this;ViewControllerBase.prototype.transitionIn.call(this),this.timeline.to(this.cup,1,{bottom:0,ease:Power2.easeOut}),this.timeline.add(function(){a.confettiController.initParticles()},"-=1"),this.timeline.add(function(){a.confettiController.stop(),a.navigateTo("team-vs-team")},"+=5")},destroy:function(){console.log("destroy intro view"),this.stage.removeChild(this.confettiController.container),this.confettiController=null,this.hide()},handleResize:function(a){var b=getBrowserHeight(),c=b/app.siteModel.properties.height,d=getBrowserWidth(),e=d/app.siteModel.properties.width,f=Math.min(Math.min(c,e),1);this.scaler.css("transform","scale("+f+")")}});var TeamVsTeamView=function(a){ViewControllerBase.call(this,a),this.inTimeline={},this.outTimeline={},this.fader=this.elem.find(".fader"),this.scaler=this.elem.find(".scaler"),this.portlandWedge=this.elem.find("#portland-wedge"),this.dallasWedge=this.elem.find("#dallas-wedge"),this.one=this.elem.find("#one-game-copy h1"),this.game=this.elem.find("#one-game-copy h2"),this.toGlory=this.elem.find("#one-game-copy h3"),this.portlandLogo=this.elem.find("#portland-logo"),this.dallasLogo=this.elem.find("#dallas-logo")};inheritsFrom(TeamVsTeamView,ViewControllerBase),$.extend(TeamVsTeamView.prototype,{handleLoadComplete:function(){console.log("team vs team: load complete");var a=this;this.inTimeline=new TimelineMax({delay:1,onComplete:function(){}}),this.outTimeline=new TimelineMax({delay:1,onComplete:function(){}}),$(window).bind("resize",function(b){a.handleResize(b)}),this.handleResize(null),this.dispatchIsReady()},transitionIn:function(){console.log("TeamVsTeam view: transitionIn");var a=this;this.show(),this.inTimeline.to(this.portlandWedge,1,{left:0,ease:Quad.easeIn}),this.inTimeline.to(this.dallasWedge,1,{right:0,ease:Quad.easeIn},"-=1"),this.inTimeline.to(this.fader,1,{opacity:1,ease:Quad.easeIn},"-=1"),this.inTimeline.add(function(){a.dispatchTransitionIn()}),this.inTimeline.set(this.one,{scaleX:4,scaleY:4,opacity:0},"+=0.4"),this.inTimeline.set(this.game,{scaleX:4,scaleY:4,opacity:0}),this.inTimeline.to(this.one,.4,{scaleX:1,scaleY:1,opacity:1,ease:Power2.easeIn}),this.inTimeline.to(this.game,.4,{scaleX:1,scaleY:1,opacity:1,ease:Power2.easeIn});var b=new SplitText(this.toGlory,{type:"words"});this.inTimeline.add(function(){a.toGlory.removeClass("fade-off")},"+=0.2"),this.inTimeline.set($(b.words[0]),{x:-400,opacity:0}),this.inTimeline.set($(b.words[1]),{x:400,opacity:0}),this.inTimeline.staggerTo($(b.words),.4,{opacity:1,x:0,ease:Power2.easeIn},0),this.inTimeline.set(this.dallasLogo,{scaleX:5,scaleY:5,opacity:0},"+=0.4"),this.inTimeline.set(this.portlandLogo,{scaleX:5,scaleY:5,opacity:0}),this.inTimeline.to(this.dallasLogo,.4,{scaleX:1,scaleY:1,opacity:1,ease:Power2.easeIn}),this.inTimeline.to(this.portlandLogo,.4,{scaleX:1,scaleY:1,opacity:1,ease:Power2.easeIn},"-=0.4"),this.inTimeline.add(function(){a.navigateTo("final-frame")},"+=2")},transitionOut:function(){var a=this;this.outTimeline.add(function(){a.showOtherView("final-frame")}),this.outTimeline.to(this.toGlory,.3,{opacity:0,ease:Power2.easeOut}),this.outTimeline.to(this.game,.3,{opacity:0,ease:Power2.easeOut},"-=0.24"),this.outTimeline.to(this.one,.3,{opacity:0,ease:Power2.easeOut},"-=0.24"),this.outTimeline.to(this.portlandWedge,1.5,{left:-1498,ease:Quad.easeOut}),this.outTimeline.to(this.dallasWedge,1.5,{right:-1557,ease:Quad.easeOut},"-=1.5"),this.outTimeline.to(this.fader,1.5,{opacity:0,ease:Quad.easeOut},"-=1.5"),this.outTimeline.add(function(){a.dispatchTransitionOutComplete()})},show:function(){ViewControllerBase.prototype.show.call(this)},handleResize:function(a){var b=getBrowserHeight(),c=b/app.siteModel.properties.height,d=getBrowserWidth(),e=d/app.siteModel.properties.width,f=Math.max(c,e);this.scaler.css("transform","scale("+f+")")}});var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;!function(a){"use strict";var b=a.GreenSockGlobals||a,c=function(a){var c,d=a.split("."),e=b;for(c=0;d.length>c;c++)e[d[c]]=e=e[d[c]]||{};return e},d=c("com.greensock.utils"),e=function(a){var b=a.nodeType,c="";if(1===b||9===b||11===b){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===b||4===b)return a.nodeValue;return c},f=document,g=f.defaultView?f.defaultView.getComputedStyle:function(){},h=/([A-Z])/g,i=function(a,b,c,d){var e;return(c=c||g(a,null))?(a=c.getPropertyValue(b.replace(h,"-$1").toLowerCase()),e=a||c.length?a:c[b]):a.currentStyle&&(c=a.currentStyle,e=c[b]),d?e:parseInt(e,10)||0},j=function(a){return a.length&&a[0]&&(a[0].nodeType&&a[0].style&&!a.nodeType||a[0].length&&a[0][0])?!0:!1},k=function(a){var b,c,d,e=[],f=a.length;for(b=0;f>b;b++)if(c=a[b],j(c))for(d=c.length,d=0;c.length>d;d++)e.push(c[d]);else e.push(c);return e},l=")eefec303079ad17405c",m=/(?:<br>|<br\/>|<br \/>)/gi,n=f.all&&!f.addEventListener,o="<div style='position:relative;display:inline-block;"+(n?"*display:inline;*zoom:1;'":"'"),p=function(a){a=a||"";var b=-1!==a.indexOf("++"),c=1;return b&&(a=a.split("++").join("")),function(){return o+(a?" class='"+a+(b?c++:"")+"'>":">")}},q=d.SplitText=b.SplitText=function(a,b){if("string"==typeof a&&(a=q.selector(a)),!a)throw"cannot split a null element.";this.elements=j(a)?k(a):[a],this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=b||{},this.split(b)},r=function(a,b,c){var d=a.nodeType;if(1===d||9===d||11===d)for(a=a.firstChild;a;a=a.nextSibling)r(a,b,c);else(3===d||4===d)&&(a.nodeValue=a.nodeValue.split(b).join(c))},s=function(a,b){for(var c=b.length;--c>-1;)a.push(b[c])},t=function(a,b,c,d,h){m.test(a.innerHTML)&&(a.innerHTML=a.innerHTML.replace(m,l));var j,k,n,o,q,t,u,v,w,x,y,z,A,B,C=e(a),D=b.type||b.split||"chars,words,lines",E=-1!==D.indexOf("lines")?[]:null,F=-1!==D.indexOf("words"),G=-1!==D.indexOf("chars"),H="absolute"===b.position||b.absolute===!0,I=H?"&#173; ":" ",J=-999,K=g(a),L=i(a,"paddingLeft",K),M=i(a,"borderBottomWidth",K)+i(a,"borderTopWidth",K),N=i(a,"borderLeftWidth",K)+i(a,"borderRightWidth",K),O=i(a,"paddingTop",K)+i(a,"paddingBottom",K),P=i(a,"paddingLeft",K)+i(a,"paddingRight",K),Q=i(a,"textAlign",K,!0),R=a.clientHeight,S=a.clientWidth,T="</div>",U=p(b.wordsClass),V=p(b.charsClass),W=-1!==(b.linesClass||"").indexOf("++"),X=b.linesClass,Y=-1!==C.indexOf("<"),Z=!0,$=[],_=[],aa=[];for(W&&(X=X.split("++").join("")),Y&&(C=C.split("<").join("{{LT}}")),j=C.length,o=U(),q=0;j>q;q++)if(u=C.charAt(q),")"===u&&C.substr(q,20)===l)o+=(Z?T:"")+"<BR/>",Z=!1,q!==j-20&&C.substr(q+20,20)!==l&&(o+=" "+U(),Z=!0),q+=19;else if(" "===u&&" "!==C.charAt(q-1)&&q!==j-1&&C.substr(q-20,20)!==l){for(o+=Z?T:"",Z=!1;" "===C.charAt(q+1);)o+=I,q++;(")"!==C.charAt(q+1)||C.substr(q+1,20)!==l)&&(o+=I+U(),Z=!0)}else o+=G&&" "!==u?V()+u+"</div>":u;for(a.innerHTML=o+(Z?T:""),Y&&r(a,"{{LT}}","<"),t=a.getElementsByTagName("*"),j=t.length,v=[],q=0;j>q;q++)v[q]=t[q];if(E||H)for(q=0;j>q;q++)w=v[q],n=w.parentNode===a,(n||H||G&&!F)&&(x=w.offsetTop,E&&n&&x!==J&&"BR"!==w.nodeName&&(k=[],E.push(k),J=x),H&&(w._x=w.offsetLeft,w._y=x,w._w=w.offsetWidth,w._h=w.offsetHeight),E&&(F!==n&&G||(k.push(w),w._x-=L),n&&q&&(v[q-1]._wordEnd=!0),"BR"===w.nodeName&&w.nextSibling&&"BR"===w.nextSibling.nodeName&&E.push([])));for(q=0;j>q;q++)w=v[q],n=w.parentNode===a,"BR"!==w.nodeName?(H&&(z=w.style,F||n||(w._x+=w.parentNode._x,w._y+=w.parentNode._y),z.left=w._x+"px",z.top=w._y+"px",z.position="absolute",z.display="block",z.width=w._w+1+"px",z.height=w._h+"px"),F?n&&""!==w.innerHTML?_.push(w):G&&$.push(w):n?(a.removeChild(w),v.splice(q--,1),j--):!n&&G&&(x=!E&&!H&&w.nextSibling,a.appendChild(w),x||a.appendChild(f.createTextNode(" ")),$.push(w))):E||H?(a.removeChild(w),v.splice(q--,1),j--):F||a.appendChild(w);if(E){for(H&&(y=f.createElement("div"),a.appendChild(y),A=y.offsetWidth+"px",x=y.offsetParent===a?0:a.offsetLeft,a.removeChild(y)),z=a.style.cssText,a.style.cssText="display:none;";a.firstChild;)a.removeChild(a.firstChild);for(B=!H||!F&&!G,q=0;E.length>q;q++){for(k=E[q],y=f.createElement("div"),y.style.cssText="display:block;text-align:"+Q+";position:"+(H?"absolute;":"relative;"),X&&(y.className=X+(W?q+1:"")),aa.push(y),j=k.length,t=0;j>t;t++)"BR"!==k[t].nodeName&&(w=k[t],y.appendChild(w),B&&(w._wordEnd||F)&&y.appendChild(f.createTextNode(" ")),H&&(0===t&&(y.style.top=w._y+"px",y.style.left=L+x+"px"),w.style.top="0px",x&&(w.style.left=w._x-x+"px")));0===j&&(y.innerHTML="&nbsp;"),F||G||(y.innerHTML=e(y).split(String.fromCharCode(160)).join(" ")),H&&(y.style.width=A,y.style.height=w._h+"px"),a.appendChild(y)}a.style.cssText=z}H&&(R>a.clientHeight&&(a.style.height=R-O+"px",R>a.clientHeight&&(a.style.height=R+M+"px")),S>a.clientWidth&&(a.style.width=S-P+"px",S>a.clientWidth&&(a.style.width=S+N+"px"))),s(c,$),s(d,_),s(h,aa)},u=q.prototype;u.split=function(a){this.isSplit&&this.revert(),this.vars=a||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var b=this.elements.length;--b>-1;)this._originals[b]=this.elements[b].innerHTML,t(this.elements[b],this.vars,this.chars,this.words,this.lines);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},u.revert=function(){if(!this._originals)throw"revert() call wasn't scoped properly.";for(var a=this._originals.length;--a>-1;)this.elements[a].innerHTML=this._originals[a];return this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},q.selector=a.$||a.jQuery||function(b){var c=a.$||a.jQuery;return c?(q.selector=c,c(b)):"undefined"==typeof document?b:document.querySelectorAll?document.querySelectorAll(b):document.getElementById("#"===b.charAt(0)?b.substr(1):b)},q.version="0.3.3"}(_gsScope),function(a){"use strict";var b=function(){return(_gsScope.GreenSockGlobals||_gsScope)[a]};"function"==typeof define&&define.amd?define(["TweenLite"],b):"undefined"!=typeof module&&module.exports&&(module.exports=b())}("SplitText");